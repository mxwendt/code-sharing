<!DOCTYPE html>
<html>
<head>
  <title>Code Snippet</title>
  <link rel="stylesheet" href="google-code-prettify/prettify.css">
</head>
<body>
<pre class="default linenums prettyprint">
<code>function fibonacci(size) {
  var first = 0;
  var second = 1;
  var next;
  var count = 2;
  var result = [first, second];

  if (size < 2) {
    return "the request was made but it was not good";
  }

  while (count++ < size) {
    next = first + second;
    first = second;
    second = next;
    result.push(next);
  }

  return result;
}</code>
</pre>
  <script src="d3/d3.js" charset="utf-8"></script>
  <script src="google-code-prettify/prettify.js" charset="utf-8"></script>
  <script>
    window.onload = function() {
      // PR_ATTRIB_NAME: "atn",
      // PR_ATTRIB_VALUE: "atv",
      // PR_COMMENT: "com",
      // PR_DECLARATION: "dec",
      // PR_KEYWORD: "kwd",
      // PR_LITERAL: "lit",
      // PR_NOCODE: "nocode",
      // PR_PLAIN: "pln",
      // PR_PUNCTUATION: "pun",
      // PR_SOURCE: "src",
      // PR_STRING: "str",
      // PR_TAG: "tag",
      // PR_TYPE: "typ",
      // prettyPrint();

      var lines = document.createElement('ol');
      var code = document.getElementsByTagName('code')[0].textContent;

      parseLines(code);
      evalCode(code);

      function evalCode(codeParam) {
        eval(codeParam);
        console.log(fibonacci(2));
      }

      function parseLines(string) {

        string.split(/\r?\n/).forEach(function(line) {
          // var match;

          console.log(line);

          var listElement = document.createElement('li');
          listElement.textContent = line;

          lines.appendChild(listElement);


          /*if (/^\s*(;.*)?/.test(line)) {
            return;
          } else if (match = line.match(/^\[(.*)\]$/)) {
            currentSection = {name: match[1], fields: []};
            categories.push(currentSection);
          } else if (match = line.match(/^(\w+)=(.*)$/)) {
            currentSection.fields.push({name: match[1], value: match[2]});
          } else {
            throw new Error("Line '" + line + "' is invalid");
          }*/
        });

        document.body.appendChild(lines);
      }
    };
  </script>
</body>
</html>
